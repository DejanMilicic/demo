{
    "Slug": "highlight-results-map-index",
    "SourceFileName": "HighlightResultsMapIndexController.cs",
    "Title": "Highlight Map Index Results",
    "DescriptionLines": [
        "When making a Full Text Search query,<br> in addition to getting the documents that contain the searched terms in the results,",
        "you can **request to get a list of text fragments highlighting those terms**.",
        "",
        "The highlighted terms show exactly why the resulting documents have matched.",
        "",
        "The following can be customized:",
        "<p>* Fragments length<br>",
        "* Fragments count<br>",
        "* Tags marking the terms within the fragments</p>"
    ],

    "Assets": [
        {
            "Title": "FTS - Static Index Demo",
            "Type" : "demo",
            "Url"  : "/text-search/fts-with-static-index-single-field"
        },
        {
            "Title": "Querying highlighting",
            "Type" : "link",
            "Url"  : "https://ravendb.net/docs/article-page/latest/Csharp/indexes/querying/highlighting"
        },
        {
            "Title": "How to use highlighting",
            "Type" : "link",
            "Url"  : "https://ravendb.net/docs/article-page/latest/csharp/client-api/session/querying/how-to-use-highlighting"
        },
        {
            "Title": "Highlighting - Blog",
            "Type" : "link",
            "Url"  : "https://ayende.com/blog/182946-C/ravendb-4-1-features-highlighting"
        }
    ],

    "Walkthroughs": [
        {
            "Title": "Define a static index",
            "Slug": "step-1",
            "DescriptionLines": [
                "* Create a static Map index class - inherit from `AbstractIndexCreationTask`.",
                "",
                "* The generic params:<br>",
                "    * _Employee_ - indicates that the source collection for the index will be the 'Employees' collection<br>",
                "    * _EmployeesDetails.IndexEntry_ - is the shape of the resulting index entries<br> (see next step)"
            ],
            "Assets": [
                {
                    "Title": "Static Indexes Overview Demo",
                    "Type" : "demo",
                    "Url"  : "/static-indexes/static-indexes-overview"
                },
                {
                    "Title": "Map Indexes",
                    "Type" : "link",
                    "Url"  : "https://ravendb.net/docs/article-page/latest/csharp/indexes/map-indexes"
                },
                {
                    "Title": "Static Indexes - Book",
                    "Type" : "link",
                    "Url"  : "https://ravendb.net/learn/inside-ravendb-book/reader/4.0/10-static-indexes-and-other-advanced-options#static-indexes-and-other-advanced-options"
                },
                {
                    "Title": "Working with Indexes - Book",
                    "Type" : "link",
                    "Url"  : "https://ravendb.net/learn/inside-ravendb-book/reader/4.0/12-working-with-indexes#working-with-indexes"
                }
            ]
        },
        {
            "Title": "The Index Entry class",
            "Slug": "step-2",
            "DescriptionLines": [
                "* The IndexEntry class defines the _index-fields per entry_ in the index.<br>",
                "  These fields will be indexed and can be queried on.",
                "",
                "* The content for each index-field is configured in the index Map function (see next step)."
            ],
            "Assets": [
                {
                    "Title": "Map Indexes",
                    "Type" : "link",
                    "Url"  : "https://ravendb.net/docs/article-page/latest/csharp/indexes/map-indexes"
                },
                {
                    "Title": "Static Indexes - Book",
                    "Type" : "link",
                    "Url"  : "https://ravendb.net/learn/inside-ravendb-book/reader/4.0/10-static-indexes-and-other-advanced-options#static-indexes-and-other-advanced-options"
                },
                {
                    "Title": "Working with Indexes - Book",
                    "Type" : "link",
                    "Url"  : "https://ravendb.net/learn/inside-ravendb-book/reader/4.0/12-working-with-indexes#working-with-indexes"
                }
            ]
        },
        {
            "Title": "Define the Map function",
            "Slug": "step-3",
            "DescriptionLines": [
                "* Define the Map function.",
                "",
                "* The content for index fields _Title_ & _Notes_ is taken from the corresponding document fields.",
                "",
                "* The fields will be customized for full text search and highlighting in the next step."
                
            ],
            "Assets": [
                {
                    "Title": "Map Indexes",
                    "Type" : "link",
                    "Url"  : "https://ravendb.net/docs/article-page/latest/csharp/indexes/map-indexes"
                },
                {
                    "Title": "Static Indexes - Book",
                    "Type" : "link",
                    "Url"  : "https://ravendb.net/learn/inside-ravendb-book/reader/4.0/10-static-indexes-and-other-advanced-options#static-indexes-and-other-advanced-options"
                },
                {
                    "Title": "Working with Indexes - Book",
                    "Type" : "link",
                    "Url"  : "https://ravendb.net/learn/inside-ravendb-book/reader/4.0/12-working-with-indexes#working-with-indexes"
                }
            ]
        },
        {
            "Title": "Configure fields for highlighting",
            "Slug" : "step-4",
            "DescriptionLines": [
                "* In order to search and get fragments with highlighted terms, the index fields on which you search must be configured with:",
                "  * `Store()`<br>",
                "     Set _FieldStorage.Yes_ to store the field in the index.",
                "",
                "  * `Index()`<br>",
                "     Set _FieldIndexing.Search_ to allow Full Text Search.",
                "",
                "  * `TermVector()`<br>",
                "     Set _FieldTermVector.WithPositionsAndOffsets_ to store the term's position and offset from the text.",
                "",
                "* During the indexing process, the fields' content will be tokenized, broken into distinct terms according to the configured analyzer (RavenStandardAnalyzer is used by default).",
                "",
                "* A query can now be made on these terms to get their matching documents including a list of text fragments containing the highlighted searched terms. See the following steps."
            ],
            "Assets": [
                {
                    "Title": "FTS - Static Index Demo",
                    "Type" : "demo",
                    "Url"  : "/text-search/fts-with-static-index-single-field"
                },
                {
                    "Title": "Store Fields on Index Demo",
                    "Type" : "demo",
                    "Url"  : "/static-indexes/store-fields-on-index"
                },
                {
                    "Title": "Querying highlighting",
                    "Type" : "link",
                    "Url"  : "https://ravendb.net/docs/article-page/latest/Csharp/indexes/querying/highlighting"
                },
                {
                    "Title": "Indexes - Analyzers",
                    "Type" : "link",
                    "Url"  : "https://ravendb.net/docs/article-page/latest/csharp/indexes/using-analyzers"
                },
                {
                    "Title": "Using term vectors",
                    "Type" : "link",
                    "Url"  : "https://ravendb.net/docs/article-page/latest/Csharp/indexes/using-term-vectors"
                },
                {
                    "Title": "Term vector in Lucene",
                    "Type" : "link",
                    "Url"  : "http://makble.com/what-is-term-vector-in-lucene"
                }
            ]
        },
        {
            "Title": "Define highlight tags",
            "Slug" : "step-5",
            "DescriptionLines": [
                "* Prior to making the search query, you can define the tags that will mark the searched terms within the text fragments. This is an optional step.",
                " ",
                "* _To define your own tags_ create a `HighlightingOptions` object with _PreTags_ & _PostTags_.<br>",
                "  This object is passed to the query - see next step.",
                "",
                "* _The default pre & post tags_ are: `<b style='background:yellow'>......</b>`<br>",
                "  The color will change per field that is searched.",
                "",
                "* When defining multiple tag strings in the tags array,<br> and when querying with multiple highlight field requests,<br> then each tag string is used per field requested respectively."
            ],
            "Assets": [
                {
                    "Title": "Querying highlighting",
                    "Type" : "link",
                    "Url"  : "https://ravendb.net/docs/article-page/latest/Csharp/indexes/querying/highlighting"
                },
                {
                    "Title": "How to use highlighting",
                    "Type" : "link",
                    "Url"  : "https://ravendb.net/docs/article-page/latest/csharp/client-api/session/querying/how-to-use-highlighting"
                },
                {
                    "Title": "Highlighting - Blog",
                    "Type" : "link",
                    "Url"  : "https://ayende.com/blog/182946-C/ravendb-4-1-features-highlighting"
                }
            ]
        },
        {
            "Title": "Make a search query",
            "Slug" : "step-6",
            "DescriptionLines": [
                "* Query for documents from collection 'Employees' that contain specific terms.<br>",
                "  In this example, we are searching for documents containing the terms: 'manager' OR 'sales'.<br>",
                "  In addition, we request the highlighted fragments.",
                "",
                "* `Highlight()`<br>",
                "   * Specify the index field for which to get text fragments with the term highlighted.<br>",
                "   * fragmentLength - the maximum length for a fragment (length must be >= 18).<br>",
                "   * fragmentCount - used to limit the number of matching fragments returned per document.<br>",
                "   * tagsToUseInFragment - provide the tags object from the previous step (optional).",
                "   * Provide an 'out Highlightings' param for the fragments' results.",
                "",
                "* `Search()`<br>",
                "   * Specify the terms to search for per index field.",
                "   * These will be the terms highlighted in the fragments received.",
                "",
                "* _Query results will be_:",
                "  * employeesResults -<br>",
                "    the documents that contain the searched terms from the 'Search()' methods.",
                "",
                "  * titleHighlightings -<br>",
                "    will contain fragments with 'manager' term from field 'Title' (marked with default tags).",
                "",
                "  * notesHighlightings -<br>",
                "    will contain fragments with 'sales' term from field 'Notes' (marked with defined tags)."
            ],
            "Assets": [
                {
                    "Title": "Query for documents - Map Index Demo",
                    "Type" : "demo",
                    "Url"  : "/static-indexes/map-index#step-4"
                },
                {
                    "Title": "Querying highlighting",
                    "Type" : "link",
                    "Url"  : "https://ravendb.net/docs/article-page/latest/Csharp/indexes/querying/highlighting"
                },
                {
                    "Title": "How to use highlighting",
                    "Type" : "link",
                    "Url"  : "https://ravendb.net/docs/article-page/latest/csharp/client-api/session/querying/how-to-use-highlighting"
                }
            ]
        },
        {
            "Title": "Get fragments",
            "Slug" : "step-7",
            "DescriptionLines": [
                "* Use `GetFragments()`, pass the document ID to get the text fragments for that employee document.",
                "",
                "* _For example_, a highlighted fragment from the 'Notes' field that contains the 'sales' term will be:<br>",
                "  ...He was promoted to +++sales+++ manager in March 1993...<br>",
                "  with the 'sales' term marked with the defined '+++' tags.",
                "",
                "* Use these results to enhance your users' search experience."
            ],
            "Assets": [
                {
                    "Title": "Querying highlighting",
                    "Type" : "link",
                    "Url"  : "https://ravendb.net/docs/article-page/latest/Csharp/indexes/querying/highlighting"
                },
                {
                    "Title": "How to use highlighting",
                    "Type" : "link",
                    "Url"  : "https://ravendb.net/docs/article-page/latest/csharp/client-api/session/querying/how-to-use-highlighting"
                }
            ]
        }
    ]
}
